{"version":3,"sources":["webpack:///webpack/bootstrap d91c2fd9731b135f76da","webpack:///./src/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/file.js","webpack:///./src/emitter.js","webpack:///./src/compress.js"],"names":["Compress","options","defaultOptions","rate","imagePrefix","name","option","Object","assign","currentFiles","compressedURLs","inputElem","inputSelector","setElems","dropElem","dropSelector","setDropElem","rateElem","rateSelector","setRateElems","downloadElem","downloadSelector","document","querySelector","addEventListener","download","link","emitter","on","files","images","compressedImg","map","image","emit","compressedSrc","imageSelector","src","selector","eventName","single","elem","Array","from","querySelectorAll","isArray","forEach","addListeners","el","ev","dimension","dimen","parseInt","target","value","cb","preventDefault","stopPropagation","e","console","log","a","createElement","replace","href","click","callback","global","g","Function","eval","window","module","exports","extra","getImageUrl","getFile","dataTransfer","event","reader","FileReader","count","filesUrl","onload","push","result","readAsDataURL","file","Emitter","_events","args","compress","compressAll","mainCanvas","createImages","Images","Image","url","img","width","height","context","getContext","drawImage","toDataURL","fileUrl"],"mappings":"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","file":"compressjs.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dists/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d91c2fd9731b135f76da","/**\n * Created by kayslay on 6/28/17.\n */\n\nimport fileListener from './file'\nimport Emitter from './emitter'\nimport compressAll, {compress} from './compress'\n\nfunction Compress(options) {\n\tconst defaultOptions = {\n\t\trate: 50,\n\t\timagePrefix: 'compressed-',\n\t\tname: \"image\"\n\t};\n\n\tconst option = Object.assign({}, defaultOptions, options);\n\n\tlet currentFiles = []; //holds the original images data url\n\tlet compressedURLs = []; //holds the compressed images data url\n\n\tconst inputElem = option.inputSelector ? setElems(option.inputSelector, 'change') : null;\n\t//set the dropElement\n\tconst dropElem = option.dropSelector ? setElems(option.dropSelector, 'drop') : null;\n\tsetDropElem(dropElem);\n\n\tconst rateElem = option.rateSelector ? setRateElems(option.rateSelector, 'change') : null;\n\n\tconst downloadElem = option.downloadSelector ? document.querySelector(option.downloadSelector) : null;\n\tdownloadElem.addEventListener('click', download);\n\tlet link = null;\n\n\tconst emitter = new Emitter();\n\n\t//SET THE EVENTS\n\t//compress the images on startCompression\n\temitter.on('startCompression', compressAll);\n\t//set the current files when the files have been saved\n\temitter.on('saveFileUrl', (files) => {\n\t\tcurrentFiles = files\n\t});\n\t//compress the images have been created\n\temitter.on('ImageCreated', (images) => {\n\t\tconst compressedImg = images.map(image => compress(image, option.rate));\n\t\temitter.emit(\"compressed\", compressedImg) // for the compression to start\n\t});\n//set compressedURLs and the image src when the compression is finished\n\temitter.on(\"compressed\", (compressedSrc) => {\n\t\tif (option.imageSelector) {\n\t\t\tdocument.querySelector(option.imageSelector).src = compressedSrc[0]\n\t\t}\n\t\tcompressedURLs = compressedSrc\n\t});\n\n//SET THE EVENTS\n\n\t/**\n\t * @description adds events to the selector elements\n\t * handles selectors that return multiple elements too.\n\t * Why this function? the functions meant to make it easily to change/ add support for multiple selectors\n\t *\n\t * @param {String} selector\n\t * @param {String} eventName\n\t * @param {Boolean} single\n\t * @returns {Element[]|Element}\n\t */\n\tfunction setElems(selector, eventName, single = true) {\n\n\t\tlet elem = single ? document.querySelector(selector) : Array.from(document.querySelectorAll(selector));\n\n\t\tif (Array.isArray(elem)) {\n\t\t\telem.forEach(el => {\n\t\t\t\taddListeners(el, eventName, (ev) => {\n\t\t\t\t\tfileListener(ev, emitter, {rate: option.rate, dimension: option.dimen})\n\t\t\t\t})\n\t\t\t})\n\t\t} else {\n\t\t\taddListeners(elem, eventName, (ev) => {\n\t\t\t\tfileListener(ev, emitter, {rate: option.rate, dimension: option.dimen})\n\t\t\t})\n\t\t}\n\t\treturn elem\n\t}\n\n\t/**\n\t * @description adds events to the rateElem.\n\t * @param {String} selector\n\t * @param {String} eventName\n\t * @param {Boolean} single\n\t * @returns {Element[]|Element}\n\t */\n\tfunction setRateElems(selector, eventName, single = true) {\n\n\t\tlet elem = single ? document.querySelector(selector) : Array.from(document.querySelectorAll(selector));\n\n\t\tif (Array.isArray(elem)) {\n\t\t\telem.forEach(el => {\n\t\t\t\taddListeners(el, eventName, (ev) => {\n\t\t\t\t\toption.rate = parseInt(ev.target.value);\n\t\t\t\t\temitter.emit('startCompression', currentFiles, emitter, {rate: option.rate, dimension: option.dimen})\n\t\t\t\t})\n\t\t\t})\n\t\t} else {\n\t\t\taddListeners(elem, eventName, (ev) => {\n\t\t\t\toption.rate = parseInt(ev.target.value);\n\t\t\t\temitter.emit('startCompression', currentFiles, emitter, {rate: option.rate, dimension: option.dimen})\n\t\t\t})\n\t\t}\n\t\treturn elem\n\t}\n\n\t/**\n\t * @description adds events\n\t * @param {Element} el\n\t * @param {String} eventName\n\t * @param {function} cb\n\t */\n\tfunction addListeners(el, eventName, cb) {\n\t\tel.addEventListener(eventName, ev => {\n\t\t\tev.preventDefault();\n\t\t\tev.stopPropagation();\n\t\t\tcb(ev)\n\t\t})\n\t}\n\n\t/**\n\t * @description adds events to the dropElem.\n\t * @param {Element} dropElem\n\t */\n\tfunction setDropElem(dropElem) {\n\t\tif (dropElem) {\n\t\t\tdropElem.addEventListener('dragenter', e => {\n\t\t\t\te.preventDefault();\n\t\t\t\tconsole.log('drag entered');\n\t\t\t});\n\n\t\t\tdropElem.addEventListener('dragover', e => {\n\t\t\t\te.preventDefault();\n\t\t\t\tconsole.log('drag entered');\n\t\t\t});\n\n\t\t\tdropElem.addEventListener('dragleave', e => {\n\t\t\t\te.preventDefault();\n\t\t\t\tconsole.log('drag entered');\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * @description used to download the compressed images\n\t * @param {Event} ev\n\t */\n\tfunction download(ev) {\n\t\tev.preventDefault();\n\t\tev.stopPropagation();\n\t\tlet a = link = link || document.createElement('a');\n\t\ta.download = option.imagePrefix + option.name.replace(/\\..+/, '');\n\t\ta.href = compressedURLs[0];\n\t\ta.click();\n\t}\n\n\treturn {\n\t\toptions: option,\n\t\ton(eventName, callback) {\n\t\t\temitter.on(eventName, callback)\n\t\t}\n\t}\n\n}\n\nglobal.Compress = Compress;\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","/**\n * @description gets the file from the input.files or the dragged dataTransfer.files\n * @param {Event} e\n * @param {Emitter} emitter\n * @returns {File[]}\n */\nfunction getFile(e, emitter) {\n\tconst files = Array.from(e.target.files || e.dataTransfer.files);\n\n\tconst event = e.target.files ? \"changed\" : \"dropped\";\n\temitter.emit(event, files);\n\treturn files\n}\n\n/**\n * @description gets the data url of the images uploaded\n * @param {File[]} files\n * @param {Emitter} emitter\n */\nfunction getImageUrl(files, emitter, ...extra) {\n\tconst reader = new FileReader();\n\tlet count = 0;\n\tlet filesUrl = [];\n\n\treader.onload = function () {\n\t\tcount--;\n\t\tfilesUrl.push(reader.result);\n\t\tif (count === 0) {\n\t\t\temitter.emit('saveFileUrl',filesUrl);\n\t\t\temitter.emit('startCompression', filesUrl, emitter, ...extra) // for the compression to start\n\t\t}\n\t};\n\n\n\tfiles.forEach(file => {\n\t\tcount++;\n\t\treader.readAsDataURL(file)\n\t})\n}\n\nexport default function (e, emitter, ...extra) {\n\tgetImageUrl(getFile(e, emitter), emitter, ...extra)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/file.js","export default class Emitter {\n\n\tconstructor() {\n\t\tthis._events = {}\n\t}\n\n//event listener\n\ton(eventName, callback) {\n\t\tconst event = this._events;\n\t\tevent[eventName] = event[eventName] || [];\n\t\tevent[eventName].push(callback);\n\t}\n\n//fire the event\n\temit(eventName, ...args) {\n\t\tconst event = this._events\n\t\tif (!(eventName in event)) return false\n\n\t\tevent[eventName].forEach(cb => cb(...args))\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/emitter.js","/**\n * Created by kayslay on 6/28/17.\n */\n\nconst mainCanvas = document.createElement('canvas');\n\n/**\n * @description creates an array of images and set their dimensions\n * @param {[String]} filesUrl\n * @param {Emitter} emitter\n * @param {Object} dimension\n */\nfunction createImages(filesUrl, emitter, dimension = {}) {\n\tlet Images = [];\n\tlet count = 0;\n\treturn filesUrl.map(url => {\n\t\tlet image = new Image();\n\t\timage.src = url;\n\t\timage.onload = () => {\n\t\t\tImages.push({img: image, dimension: Object.assign({}, {width: image.width, height: image.height}, dimension)});\n\t\t\tif (count === 0) {\n\t\t\t\temitter.emit('ImageCreated', Images)\n\t\t\t}\n\t\t}\n\n\t})\n}\n\n/**\n * @description the place where the compression work is done\n * @param {{img:Image,dimension:{}} image\n * @param {Number} rate\n * @returns {string}\n */\nexport function compress(image, rate) {\n\tconst context = mainCanvas.getContext('2d');\n\tmainCanvas.width = image.dimension.width;\n\tmainCanvas.height = image.dimension.height;\n\tcontext.drawImage(image.img, 0, 0, image.dimension.width, image.dimension.height);\n\treturn mainCanvas.toDataURL(\"image/jpeg\", rate/100);\n}\n\n/**\n * @description start the compression\n * @param {String} fileUrl\n * @param {Emitter } emitter\n * @param {Object}dimension\n */\nexport default function compressAll(fileUrl, emitter, {dimension}) {\n\temitter.emit('compressing'); // notify loaders that are interested in knowing when the compression starts\n\n\tcreateImages(fileUrl, emitter, dimension);\n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/compress.js"],"sourceRoot":""}